```markdown
# ğŸ“° Ğ¢Ğ•Ğ¥ĞĞ˜Ğ§Ğ•Ğ¡ĞšĞĞ¯ Ğ”ĞĞšĞ£ĞœĞ•ĞĞ¢ĞĞ¦Ğ˜Ğ¯ ĞŸĞ ĞĞ•ĞšĞ¢Ğ
# Ğ¡Ğ°Ğ¹Ñ‚ Ğ³Ğ¾Ñ€Ğ¾Ğ´ÑĞºĞ¾Ğ¹ Ğ³Ğ°Ğ·ĞµÑ‚Ñ‹ Â«ĞĞ¹Ğ¼Ğ°Ò› Ğ°Ò›ÑˆĞ°Ğ¼Ñ‹Â»

**Ğ’ĞµÑ€ÑĞ¸Ñ:** 3.0.0 Final  
**Ğ”Ğ°Ñ‚Ğ°:** 2024  
**Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… Ready for Development  
**ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°:** 26 ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²

---

## ğŸ“‹ Ğ¡ĞĞ”Ğ•Ğ Ğ–ĞĞĞ˜Ğ•

1. [Executive Summary](#1-executive-summary)
2. [ĞĞ±Ğ·Ğ¾Ñ€ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°](#2-Ğ¾Ğ±Ğ·Ğ¾Ñ€-Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°)
3. [Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹ ÑÑ‚ĞµĞº](#3-Ñ‚ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğ¹-ÑÑ‚ĞµĞº)
4. [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹](#4-Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹)
5. [Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#5-Ğ±Ğ°Ğ·Ğ°-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
6. [API ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ](#6-api-ÑĞ¿ĞµÑ†Ğ¸Ñ„Ğ¸ĞºĞ°Ñ†Ğ¸Ñ)
7. [Frontend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ](#7-frontend-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ)
8. [Backend Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ](#8-backend-Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ)
9. [AI-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»](#9-ai-Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¾Ğ½Ğ°Ğ»)
10. [Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°](#10-Ñ€ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°)
11. [ĞœĞ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ](#11-Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ğ°Ñ-Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ)
12. [Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ](#12-Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ)
13. [ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ](#13-Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ÑÑ‚ÑŒ)
14. [SEO Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ](#14-seo-Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ)
15. [ĞĞ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°](#15-Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°)
16. [Deployment](#16-deployment)
17. [ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³](#17-Ğ¼Ğ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³)
18. [Ğ¢ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ](#18-Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ)
19. [Roadmap](#19-roadmap)
20. [Acceptance Criteria](#20-acceptance-criteria)

---

## 1. EXECUTIVE SUMMARY

### 1.1 Ğ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ

**Â«ĞĞ¹Ğ¼Ğ°Ò› Ğ°Ò›ÑˆĞ°Ğ¼Ñ‹Â»** - ÑĞ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ°Ñ Ğ²ĞµĞ±-Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğ° Ğ´Ğ»Ñ Ğ³Ğ¾Ñ€Ğ¾Ğ´ÑĞºĞ¾Ğ¹ Ğ³Ğ°Ğ·ĞµÑ‚Ñ‹ Ñ Ğ¿Ğ¾Ğ»Ğ½Ğ¾Ğ¹ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹ ĞºĞ°Ğ·Ğ°Ñ…ÑĞºĞ¾Ğ³Ğ¾ Ğ¸ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ¾Ğ², AI-powered Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€Ğ¾Ğ¼ ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚Ğ° Ğ¸ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹ Ğ¼Ğ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸.

### 1.2 ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

```yaml
Platform Type: News Media Platform
Primary Language: Kazakh
Secondary Language: Russian (AI-powered translation)
Target Audience: 25-54 years, city & region residents
Traffic Distribution: 70% mobile, 25% desktop, 5% tablet

Key Features:
  - ğŸ“± Mobile-First Design
  - ğŸ¤– AI Content Generation & Translation
  - ğŸ’° Advanced Ad Management System
  - ğŸ“Š Real-time Analytics
  - âš¡ High Performance (PageSpeed > 90)
  - ğŸ”’ Enterprise-grade Security
  - â™¿ WCAG 2.1 AA Accessibility
  - ğŸŒ Bilingual Support (KZ/RU)
  - ğŸ“° PDF Archive System
  - ğŸ” Full-text Search
  - ğŸ’¬ Comments System
  - ğŸ“§ Newsletter & Push Notifications
```

### 1.3 Ğ‘Ğ¸Ğ·Ğ½ĞµÑ-Ñ†ĞµĞ»Ğ¸

- Ğ¦Ğ¸Ñ„Ñ€Ğ¾Ğ²Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ğ¿ĞµÑ‡Ğ°Ñ‚Ğ½Ğ¾Ğ³Ğ¾ Ğ¸Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ
- Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ Ğ¾Ñ…Ğ²Ğ°Ñ‚Ğ° Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¸ Ğ½Ğ° 300%
- ĞœĞ¾Ğ½ĞµÑ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· Ñ€ĞµĞºĞ»Ğ°Ğ¼Ñƒ (CPM-based)
- Ğ¡Ğ½Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ Ğ¸Ğ·Ğ´ĞµÑ€Ğ¶ĞµĞº Ğ½Ğ° ĞºĞ¾Ğ½Ñ‚ĞµĞ½Ñ‚-Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´ÑÑ‚Ğ²Ğ¾ Ñ‡ĞµÑ€ĞµĞ· AI
- ĞŸĞ¾Ğ²Ñ‹ÑˆĞµĞ½Ğ¸Ğµ ÑĞºĞ¾Ñ€Ğ¾ÑÑ‚Ğ¸ Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹ Ñ 24Ñ‡ Ğ´Ğ¾ 15 Ğ¼Ğ¸Ğ½ÑƒÑ‚
- Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ digital-first Ñ€ĞµĞ´Ğ°ĞºÑ†Ğ¸Ğ¸

### 1.4 Ğ¢ĞµÑ…Ğ½Ğ¸Ñ‡ĞµÑĞºĞ¸Ğµ Ñ†ĞµĞ»Ğ¸

- Lighthouse Performance Score > 90
- Time to First Byte < 200ms
- 99.9% Uptime
- Support 10,000+ concurrent users
- AI Generation latency < 5s
- Mobile PageSpeed > 85

---

## 2. ĞĞ‘Ğ—ĞĞ  ĞŸĞ ĞĞ•ĞšĞ¢Ğ

### 2.1 Ğ¦ĞµĞ»ĞµĞ²Ğ°Ñ Ğ°ÑƒĞ´Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ

**Ğ”ĞµĞ¼Ğ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ:**
- Ğ’Ğ¾Ğ·Ñ€Ğ°ÑÑ‚: 25-54 Ğ³Ğ¾Ğ´Ğ° (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ), 18-24 Ğ¸ 55+ (Ğ²Ñ‚Ğ¾Ñ€Ğ¸Ñ‡Ğ½Ğ°Ñ)
- Ğ“ĞµĞ¾Ğ³Ñ€Ğ°Ñ„Ğ¸Ñ: Ğ“Ğ¾Ñ€Ğ¾Ğ´ Ğ¸ Ğ¾Ğ±Ğ»Ğ°ÑÑ‚ÑŒ, Ğ¡ĞĞ“ (Ñ€Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ¸Ğµ)
- Ğ¯Ğ·Ñ‹ĞºĞ¸: ĞšĞ°Ğ·Ğ°Ñ…ÑĞºĞ¸Ğ¹ (70%), Ğ ÑƒÑÑĞºĞ¸Ğ¹ (30%)
- ĞĞ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ: Ğ¡Ñ€ĞµĞ´Ğ½ĞµĞµ Ğ¸ Ğ²Ñ‹ÑÑˆĞµĞµ

**Ğ£ÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°:**
```
Mobile:   70% (iOS 40%, Android 60%)
Desktop:  25% (Windows 80%, macOS 20%)
Tablet:   5%  (iPad 70%, Android 30%)
```

**Ğ‘Ñ€Ğ°ÑƒĞ·ĞµÑ€Ñ‹:**
```
Chrome:            65%
Safari:            20%
Samsung Internet:  10%
Others:            5%
```

### 2.2 ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ Ñ€ÑƒĞ±Ñ€Ğ¸ĞºĞ¸

```typescript
const categories = [
  { slug: 'zhanalyqtar', name_kz: 'Ğ–ĞÒ¢ĞĞ›Ğ«ÒšĞ¢ĞĞ ', name_ru: 'ĞĞĞ’ĞĞ¡Ğ¢Ğ˜' },
  { slug: 'ozekti', name_kz: 'Ó¨Ğ—Ğ•ĞšĞ¢Ğ†', name_ru: 'ĞĞšĞ¢Ğ£ĞĞ›Ğ¬ĞĞ' },
  { slug: 'sayasat', name_kz: 'Ğ¡ĞĞ¯Ğ¡ĞĞ¢', name_ru: 'ĞŸĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ' },
  { slug: 'madeniyet', name_kz: 'ĞœÓ˜Ğ”Ğ•ĞĞ˜Ğ•Ğ¢', name_ru: 'ĞšĞ£Ğ›Ğ¬Ğ¢Ğ£Ğ Ğ' },
  { slug: 'qogam', name_kz: 'ÒšĞÒ’ĞĞœ', name_ru: 'ĞĞ‘Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ' },
  { slug: 'kazakhmys', name_kz: 'KAZAKHMYS NEWS', name_ru: 'KAZAKHMYS NEWS' }
];
```

### 2.3 Sitemap

```
/                              # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ
â”œâ”€â”€ /kz/                       # ĞšĞ°Ğ·Ğ°Ñ…ÑĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ (default)
â”‚   â”œâ”€â”€ /zhanalyqtar/         # Ğ–ĞÒ¢ĞĞ›Ğ«ÒšĞ¢ĞĞ 
â”‚   â”œâ”€â”€ /ozekti/              # Ó¨Ğ—Ğ•ĞšĞ¢Ğ†
â”‚   â”œâ”€â”€ /sayasat/             # Ğ¡ĞĞ¯Ğ¡ĞĞ¢
â”‚   â”œâ”€â”€ /madeniyet/           # ĞœÓ˜Ğ”Ğ•ĞĞ˜Ğ•Ğ¢
â”‚   â”œâ”€â”€ /qogam/               # ÒšĞÒ’ĞĞœ
â”‚   â”œâ”€â”€ /kazakhmys/           # KAZAKHMYS NEWS
â”‚   â”œâ”€â”€ /multimedia/          # ĞœÑƒĞ»ÑŒÑ‚Ğ¸Ğ¼ĞµĞ´Ğ¸Ğ°
â”‚   â”‚   â”œâ”€â”€ /photo/          
â”‚   â”‚   â””â”€â”€ /video/          
â”‚   â”œâ”€â”€ /archive/             
â”‚   â”‚   â”œâ”€â”€ /pdf/            
â”‚   â”‚   â””â”€â”€ /search/         
â”‚   â”œâ”€â”€ /about/              
â”‚   â”œâ”€â”€ /contacts/           
â”‚   â”œâ”€â”€ /subscribe/          
â”‚   â””â”€â”€ /[category]/[slug]   # Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ÑÑ‚Ğ°Ñ‚ÑŒĞ¸
â”‚
â”œâ”€â”€ /ru/                      # Ğ ÑƒÑÑĞºĞ°Ñ Ğ²ĞµÑ€ÑĞ¸Ñ
â”‚   â””â”€â”€ ... (Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ /kz/)
â”‚
â””â”€â”€ /admin/                   # ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ
    â”œâ”€â”€ /dashboard           
    â”œâ”€â”€ /articles            
    â”‚   â”œâ”€â”€ /new            # AI-editor
    â”‚   â””â”€â”€ /[id]/edit      
    â”œâ”€â”€ /media              
    â”œâ”€â”€ /categories         
    â”œâ”€â”€ /tags               
    â”œâ”€â”€ /users              
    â”œâ”€â”€ /comments           
    â”œâ”€â”€ /ads                
    â”œâ”€â”€ /analytics          
    â”œâ”€â”€ /ai                 
    â””â”€â”€ /settings           
```

---

## 3. Ğ¢Ğ•Ğ¥ĞĞ˜Ğ§Ğ•Ğ¡ĞšĞ˜Ğ™ Ğ¡Ğ¢Ğ•Ğš

### 3.1 Frontend Stack

```yaml
Core Framework:
  Framework: Next.js 14.2+
  Router: App Router (RSC)
  Language: TypeScript 5.3+
  Runtime: Node.js 20 LTS

Styling:
  Framework: Tailwind CSS 3.4+
  Components: Shadcn UI (Radix UI)
  Icons: Lucide React
  Fonts: 
    - Inter (UI)
    - Noto Sans (Kazakh content)

State Management:
  Global State: Zustand 4.5+
  Server State: TanStack Query 5+
  Forms: React Hook Form 7+ + Zod 3+
  
Rich Text Editor:
  Library: TipTap 2+ (ProseMirror)
  Features: AI autocomplete, mentions, markdown

Animation:
  Library: Framer Motion 11+
  Principles: 60fps, reduced-motion

Build Tools:
  Dev: Vite 5+
  Production: Next.js
  Package Manager: pnpm 8+

Testing:
  Unit: Vitest
  E2E: Playwright
  Component: React Testing Library
```

### 3.2 Backend Stack

```yaml
Core:
  Runtime: Node.js 20 LTS
  Framework: NestJS 10+
  Language: TypeScript 5.3+

Database:
  Primary: PostgreSQL 15+
  ORM: Prisma 5+
  Extensions: pg_trgm, fuzzystrmatch

Caching:
  Provider: Redis 7+
  Library: ioredis

Storage:
  Provider: MinIO (S3-compatible)
  CDN: Cloudflare R2

Search:
  Engine: Elasticsearch 8.11+
  Alternative: Meilisearch

Queue:
  Provider: BullMQ (Redis)

Real-time:
  Protocol: WebSocket (Socket.io)
```

### 3.3 AI/ML Stack

```yaml
Primary AI:
  Provider: Google Gemini Pro 1.5
  Max Tokens: 32K input / 8K output

Fallback AI:
  Provider: OpenAI GPT-4 Turbo
  Max Tokens: 128K input / 4K output

Vector DB:
  Provider: Pinecone / Weaviate
  Embeddings: text-embedding-3-large

Image Generation:
  Providers: DALL-E 3, Stable Diffusion XL
```

### 3.4 Infrastructure

```yaml
Hosting:
  Provider: ĞšĞ°Ğ·Ğ°Ñ…ÑÑ‚Ğ°Ğ½ÑĞºĞ¸Ğ¹ VPS
  Specs: 4 vCPU, 8GB RAM, 100GB SSD
  OS: Ubuntu 22.04 LTS

Containerization:
  Runtime: Docker 24+
  Orchestration: Docker Compose

CDN:
  Provider: Cloudflare
  Features: DDoS, WAF, SSL, Caching

CI/CD:
  Platform: GitHub Actions

Monitoring:
  Metrics: Prometheus + Grafana
  Logs: Loki
  APM: Sentry

Backup:
  Database: Daily full + 6h incremental
  Retention: 30 days
```

---

## 4. ĞĞ Ğ¥Ğ˜Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ«

### 4.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Cloudflare CDN                      â”‚
â”‚         (DDoS, WAF, SSL, Caching)                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  Nginx Load Balancer â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚ Next.js  â”‚        â”‚  NestJS   â”‚
   â”‚ Frontend â”‚        â”‚    API    â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
                             â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                     â”‚                  â”‚
  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
  â”‚ Content â”‚         â”‚ Translation â”‚    â”‚    AI     â”‚
  â”‚ Service â”‚         â”‚   Service   â”‚    â”‚  Service  â”‚
  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                  â”‚
       â”‚              â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
       â”‚              â”‚ Gemini/GPT-4  â”‚        â”‚
       â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
       â”‚                                       â”‚
  â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”
  â”‚           â”‚          â”‚          â”‚              â”‚
â”Œâ”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
â”‚ PG â”‚  â”‚ Redis  â”‚  â”‚ MinIO â”‚  â”‚ Elasticâ”‚  â”‚ Pinecone â”‚
â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ĞœĞ¸ĞºÑ€Ğ¾ÑĞµÑ€Ğ²Ğ¸ÑÑ‹

```typescript
services/
â”œâ”€â”€ api-gateway/          // Auth, routing
â”œâ”€â”€ content-service/      // Articles, categories
â”œâ”€â”€ media-service/        // File upload, processing
â”œâ”€â”€ ai-service/          // AI operations
â”œâ”€â”€ translation-service/ // Translation management
â”œâ”€â”€ ad-service/          // Ad management
â”œâ”€â”€ analytics-service/   // Analytics
â”œâ”€â”€ notification-service/// Email, Push
â”œâ”€â”€ search-service/      // Elasticsearch
â””â”€â”€ user-service/        // Users, auth
```

### 4.3 Event-Driven Architecture

```typescript
// Event Publisher
interface ServiceEvent {
  type: string;
  payload: unknown;
  timestamp: Date;
  source: string;
}

enum EventType {
  ARTICLE_CREATED = 'article.created',
  ARTICLE_PUBLISHED = 'article.published',
  ARTICLE_UPDATED = 'article.updated',
  COMMENT_POSTED = 'comment.posted',
  AI_GENERATION_COMPLETED = 'ai.generation.completed',
}

// Publisher
class EventPublisher {
  async publish(event: ServiceEvent) {
    await this.redis.publish('events', JSON.stringify(event));
  }
}

// Usage
await eventPublisher.publish({
  type: EventType.ARTICLE_CREATED,
  payload: { articleId: article.id },
  timestamp: new Date(),
  source: 'content-service'
});
```

---

## 5. Ğ‘ĞĞ—Ğ Ğ”ĞĞĞĞ«Ğ¥

### 5.1 PostgreSQL Schema

```sql
-- ==========================================
-- ENUMS
-- ==========================================

CREATE TYPE user_role AS ENUM ('admin', 'editor', 'journalist', 'moderator');
CREATE TYPE article_status AS ENUM ('draft', 'review', 'scheduled', 'published', 'archived');
CREATE TYPE ad_position AS ENUM ('header', 'sidebar_top', 'sidebar_middle', 'in_content', 'footer', 'sticky_bottom');
CREATE TYPE ad_size AS ENUM ('728x90', '970x90', '300x250', '300x600', '320x50', 'native');
CREATE TYPE device_type AS ENUM ('mobile', 'tablet', 'desktop');

-- ==========================================
-- EXTENSIONS
-- ==========================================

CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pg_trgm";
CREATE EXTENSION IF NOT EXISTS "fuzzystrmatch";

-- ==========================================
-- USERS
-- ==========================================

CREATE TABLE users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  role user_role NOT NULL DEFAULT 'journalist',
  
  first_name VARCHAR(100),
  last_name VARCHAR(100),
  avatar_url TEXT,
  bio TEXT,
  
  is_active BOOLEAN DEFAULT true,
  is_verified BOOLEAN DEFAULT false,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  last_login_at TIMESTAMP
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);

-- ==========================================
-- CATEGORIES
-- ==========================================

CREATE TABLE categories (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  slug VARCHAR(100) UNIQUE NOT NULL,
  
  name_kz VARCHAR(255) NOT NULL,
  name_ru VARCHAR(255) NOT NULL,
  description_kz TEXT,
  description_ru TEXT,
  
  parent_id UUID REFERENCES categories(id),
  sort_order INTEGER DEFAULT 0,
  is_active BOOLEAN DEFAULT true,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_categories_slug ON categories(slug);
CREATE INDEX idx_categories_parent ON categories(parent_id);

-- ==========================================
-- TAGS
-- ==========================================

CREATE TABLE tags (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  slug VARCHAR(100) UNIQUE NOT NULL,
  name_kz VARCHAR(100) NOT NULL,
  name_ru VARCHAR(100) NOT NULL,
  usage_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_tags_slug ON tags(slug);

-- ==========================================
-- MEDIA FILES
-- ==========================================

CREATE TABLE media_files (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  
  filename VARCHAR(255) NOT NULL,
  original_filename VARCHAR(255) NOT NULL,
  mime_type VARCHAR(100) NOT NULL,
  size INTEGER NOT NULL,
  
  width INTEGER,
  height INTEGER,
  
  url TEXT NOT NULL,
  thumbnail_url TEXT,
  
  alt_text_kz VARCHAR(255),
  alt_text_ru VARCHAR(255),
  caption_kz TEXT,
  caption_ru TEXT,
  
  uploaded_by UUID REFERENCES users(id),
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_media_uploaded_by ON media_files(uploaded_by);

-- ==========================================
-- ARTICLES
-- ==========================================

CREATE TABLE articles (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  
  slug_kz VARCHAR(255) UNIQUE NOT NULL,
  slug_ru VARCHAR(255) UNIQUE NOT NULL,
  
  title_kz VARCHAR(500) NOT NULL,
  title_ru VARCHAR(500),
  subtitle_kz VARCHAR(500),
  subtitle_ru VARCHAR(500),
  
  excerpt_kz TEXT,
  excerpt_ru TEXT,
  content_kz TEXT NOT NULL,
  content_ru TEXT,
  
  category_id UUID NOT NULL REFERENCES categories(id),
  author_id UUID NOT NULL REFERENCES users(id),
  featured_image_id UUID REFERENCES media_files(id),
  
  status article_status DEFAULT 'draft',
  
  is_breaking BOOLEAN DEFAULT false,
  is_featured BOOLEAN DEFAULT false,
  is_pinned BOOLEAN DEFAULT false,
  allow_comments BOOLEAN DEFAULT true,
  
  views INTEGER DEFAULT 0,
  likes INTEGER DEFAULT 0,
  shares INTEGER DEFAULT 0,
  
  published_at TIMESTAMP,
  scheduled_at TIMESTAMP,
  
  ai_generated BOOLEAN DEFAULT false,
  ai_provider VARCHAR(50),
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),
  deleted_at TIMESTAMP,
  
  search_vector_kz tsvector,
  search_vector_ru tsvector
);

CREATE INDEX idx_articles_slug_kz ON articles(slug_kz);
CREATE INDEX idx_articles_slug_ru ON articles(slug_ru);
CREATE INDEX idx_articles_category ON articles(category_id);
CREATE INDEX idx_articles_author ON articles(author_id);
CREATE INDEX idx_articles_status ON articles(status);
CREATE INDEX idx_articles_published ON articles(published_at DESC);
CREATE INDEX idx_articles_search_kz ON articles USING gin(search_vector_kz);
CREATE INDEX idx_articles_search_ru ON articles USING gin(search_vector_ru);

-- Article Tags
CREATE TABLE article_tags (
  article_id UUID REFERENCES articles(id) ON DELETE CASCADE,
  tag_id UUID REFERENCES tags(id) ON DELETE CASCADE,
  PRIMARY KEY (article_id, tag_id)
);

-- ==========================================
-- COMMENTS
-- ==========================================

CREATE TABLE comments (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  article_id UUID NOT NULL REFERENCES articles(id) ON DELETE CASCADE,
  user_id UUID REFERENCES users(id),
  parent_id UUID REFERENCES comments(id) ON DELETE CASCADE,
  
  content TEXT NOT NULL,
  
  guest_name VARCHAR(100),
  guest_email VARCHAR(255),
  
  is_approved BOOLEAN DEFAULT false,
  is_deleted BOOLEAN DEFAULT false,
  
  likes INTEGER DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_comments_article ON comments(article_id);
CREATE INDEX idx_comments_user ON comments(user_id);

-- ==========================================
-- AI GENERATIONS
-- ==========================================

CREATE TABLE ai_generations (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  user_id UUID NOT NULL REFERENCES users(id),
  article_id UUID REFERENCES articles(id),
  
  operation_type VARCHAR(50) NOT NULL,
  provider VARCHAR(50) NOT NULL,
  
  input_text TEXT,
  output_text TEXT,
  
  input_tokens INTEGER,
  output_tokens INTEGER,
  cost_usd DECIMAL(10, 6),
  
  duration_ms INTEGER,
  status VARCHAR(20) DEFAULT 'success',
  
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_ai_generations_user ON ai_generations(user_id);
CREATE INDEX idx_ai_generations_provider ON ai_generations(provider);

-- ==========================================
-- AD UNITS
-- ==========================================

CREATE TABLE ad_units (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  code VARCHAR(100) UNIQUE NOT NULL,
  name VARCHAR(255) NOT NULL,
  
  position ad_position NOT NULL,
  size ad_size NOT NULL,
  
  html_content TEXT,
  click_url TEXT,
  
  is_active BOOLEAN DEFAULT true,
  priority INTEGER DEFAULT 0,
  
  total_impressions INTEGER DEFAULT 0,
  total_clicks INTEGER DEFAULT 0,
  
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_ad_units_position ON ad_units(position);
CREATE INDEX idx_ad_units_active ON ad_units(is_active);

-- ==========================================
-- ANALYTICS
-- ==========================================

CREATE TABLE analytics_events (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  event_type VARCHAR(50) NOT NULL,
  article_id UUID REFERENCES articles(id),
  user_id UUID REFERENCES users(id),
  session_id VARCHAR(255),
  properties JSONB,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX idx_analytics_events_type ON analytics_events(event_type);
CREATE INDEX idx_analytics_events_article ON analytics_events(article_id);
CREATE INDEX idx_analytics_events_created ON analytics_events(created_at DESC);

-- ==========================================
-- SEED DATA
-- ==========================================

INSERT INTO categories (slug, name_kz, name_ru, sort_order) VALUES
('zhanalyqtar', 'Ğ–ĞÒ¢ĞĞ›Ğ«ÒšĞ¢ĞĞ ', 'ĞĞĞ’ĞĞ¡Ğ¢Ğ˜', 1),
('ozekti', 'Ó¨Ğ—Ğ•ĞšĞ¢Ğ†', 'ĞĞšĞ¢Ğ£ĞĞ›Ğ¬ĞĞ', 2),
('sayasat', 'Ğ¡ĞĞ¯Ğ¡ĞĞ¢', 'ĞŸĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ', 3),
('madeniyet', 'ĞœÓ˜Ğ”Ğ•ĞĞ˜Ğ•Ğ¢', 'ĞšĞ£Ğ›Ğ¬Ğ¢Ğ£Ğ Ğ', 4),
('qogam', 'ÒšĞÒ’ĞĞœ', 'ĞĞ‘Ğ©Ğ•Ğ¡Ğ¢Ğ’Ğ', 5),
('kazakhmys', 'KAZAKHMYS NEWS', 'KAZAKHMYS NEWS', 6);
```

### 5.2 Prisma Schema

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum UserRole {
  admin
  editor
  journalist
  moderator
}

enum ArticleStatus {
  draft
  review
  scheduled
  published
  archived
}

model User {
  id            String   @id @default(uuid()) @db.Uuid
  email         String   @unique
  passwordHash  String   @map("password_hash")
  role          UserRole @default(journalist)
  firstName     String?  @map("first_name")
  lastName      String?  @map("last_name")
  avatarUrl     String?  @map("avatar_url")
  isActive      Boolean  @default(true) @map("is_active")
  createdAt     DateTime @default(now()) @map("created_at")
  updatedAt     DateTime @updatedAt @map("updated_at")
  
  articles      Article[]
  comments      Comment[]
  
  @@map("users")
}

model Category {
  id            String   @id @default(uuid()) @db.Uuid
  slug          String   @unique
  nameKz        String   @map("name_kz")
  nameRu        String   @map("name_ru")
  sortOrder     Int      @default(0) @map("sort_order")
  isActive      Boolean  @default(true) @map("is_active")
  createdAt     DateTime @default(now()) @map("created_at")
  
  articles      Article[]
  
  @@map("categories")
}

model Article {
  id              String        @id @default(uuid()) @db.Uuid
  slugKz          String        @unique @map("slug_kz")
  slugRu          String        @unique @map("slug_ru")
  titleKz         String        @map("title_kz")
  titleRu         String?       @map("title_ru")
  contentKz       String        @map("content_kz")
  contentRu       String?       @map("content_ru")
  categoryId      String        @map("category_id") @db.Uuid
  authorId        String        @map("author_id") @db.Uuid
  status          ArticleStatus @default(draft)
  views           Int           @default(0)
  publishedAt     DateTime?     @map("published_at")
  createdAt       DateTime      @default(now()) @map("created_at")
  
  category        Category      @relation(fields: [categoryId], references: [id])
  author          User          @relation(fields: [authorId], references: [id])
  comments        Comment[]
  
  @@map("articles")
}

model Comment {
  id          String   @id @default(uuid()) @db.Uuid
  articleId   String   @map("article_id") @db.Uuid
  userId      String?  @map("user_id") @db.Uuid
  content     String
  isApproved  Boolean  @default(false) @map("is_approved")
  createdAt   DateTime @default(now()) @map("created_at")
  
  article     Article  @relation(fields: [articleId], references: [id])
  user        User?    @relation(fields: [userId], references: [id])
  
  @@map("comments")
}
```

---

## 6. API Ğ¡ĞŸĞ•Ğ¦Ğ˜Ğ¤Ğ˜ĞšĞĞ¦Ğ˜Ğ¯

### 6.1 Base Configuration

```yaml
Base URL: https://api.aimak.kz/v1
Format: JSON
Authentication: JWT Bearer Token
Rate Limiting: 
  - Public: 100 req/min
  - Authenticated: 1000 req/min
```

### 6.2 Authentication Endpoints

```yaml
# Register
POST /auth/register
Request:
  email: string
  password: string (min 8)
  firstName: string
  lastName: string
Response:
  accessToken: string
  refreshToken: string
  user: User

# Login
POST /auth/login
Request:
  email: string
  password: string
Response:
  accessToken: string
  refreshToken: string
  user: User

# Refresh Token
POST /auth/refresh
Request:
  refreshToken: string
Response:
  accessToken: string
  refreshToken: string
```

### 6.3 Articles Endpoints

```yaml
# Get Articles
GET /articles
Query:
  page: number (default: 1)
  limit: number (default: 20)
  category: string
  search: string
  language: 'kz' | 'ru'
Response:
  data: Article[]
  meta: { total, page, limit, totalPages }

# Get Article by Slug
GET /articles/{language}/{slug}
Response:
  article: Article
  relatedArticles: Article[]

# Create Article
POST /articles
Headers:
  Authorization: Bearer {token}
Request:
  titleKz: string
  contentKz: string
  categoryId: string
  status: ArticleStatus
Response:
  article: Article

# Update Article
PUT /articles/{id}
Headers:
  Authorization: Bearer {token}
Request:
  [article fields]
Response:
  article: Article

# Publish Article
POST /articles/{id}/publish
Headers:
  Authorization: Bearer {token}
Response:
  article: Article
```

### 6.4 AI Endpoints

```yaml
# Generate Article
POST /ai/generate/article
Headers:
  Authorization: Bearer {token}
Request:
  keywords: string[]
  tone: 'formal' | 'casual' | 'investigative'
  length: 'short' | 'medium' | 'long'
  language: 'kz' | 'ru'
Response:
  article:
    title: string
    content: string
    tags: string[]
  usage:
    tokens: number
    cost: number

# Translate Text
POST /ai/translate
Headers:
  Authorization: Bearer {token}
Request:
  text: string
  fromLang: 'kz' | 'ru'
  toLang: 'kz' | 'ru'
Response:
  translation: string
  confidence: number

# Improve Text
POST /ai/improve
Headers:
  Authorization: Bearer {token}
Request:
  text: string
  improvements: string[]
  language: 'kz' | 'ru'
Response:
  improvedText: string
  changes: string[]
```

### 6.5 Media Endpoints

```yaml
# Upload Media
POST /media/upload
Headers:
  Authorization: Bearer {token}
  Content-Type: multipart/form-data
Request:
  file: File (max 20MB)
  altTextKz: string
  altTextRu: string
Response:
  media:
    id: string
    url: string
    thumbnailUrl: string

# Get Media Library
GET /media
Headers:
  Authorization: Bearer {token}
Query:
  page: number
  limit: number
Response:
  data: MediaFile[]
  meta: PaginationMeta
```

### 6.6 Search Endpoints

```yaml
# Search Articles
GET /search
Query:
  q: string (required)
  language: 'kz' | 'ru'
  category: string
  page: number
Response:
  results: Article[]
  facets:
    categories: object[]
    tags: object[]
  meta: PaginationMeta

# Autocomplete
GET /search/suggest
Query:
  q: string (min 2 chars)
  limit: number (default: 10)
Response:
  suggestions: string[]
```

---

## 7. FRONTEND ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ•

### 7.1 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
apps/web/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ icons/
â”‚   â”œâ”€â”€ fonts/
â”‚   â””â”€â”€ manifest.json
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ [lang]/
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ [category]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [slug]/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ multimedia/
â”‚   â”‚   â”‚   â”œâ”€â”€ archive/
â”‚   â”‚   â”‚   â””â”€â”€ search/page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ admin/
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ articles/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ new/page.tsx
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ [id]/edit/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ media/page.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ analytics/page.tsx
â”‚   â”‚   â”‚   â””â”€â”€ settings/page.tsx
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ api/
â”‚   â”‚       â”œâ”€â”€ auth/route.ts
â”‚   â”‚       â”œâ”€â”€ articles/route.ts
â”‚   â”‚       â””â”€â”€ ai/generate/route.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ui/              # Shadcn components
â”‚   â”‚   â”œâ”€â”€ layout/
â”‚   â”‚   â”œâ”€â”€ article/
â”‚   â”‚   â”œâ”€â”€ editor/
â”‚   â”‚   â””â”€â”€ ads/
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ store/
â”‚   â””â”€â”€ types/
â”‚
â”œâ”€â”€ .env.local
â”œâ”€â”€ next.config.js
â”œâ”€â”€ tailwind.config.ts
â””â”€â”€ package.json
```

### 7.2 Key Components

#### Homepage

```typescript
// app/[lang]/page.tsx
import { getArticles } from '@/lib/api';
import { ArticleCard } from '@/components/article/ArticleCard';
import { AdSlot } from '@/components/ads/AdSlot';

export default async function HomePage({
  params: { lang }
}: {
  params: { lang: 'kz' | 'ru' }
}) {
  const articles = await getArticles({ lang, limit: 20 });

  return (
    <div className="container mx-auto px-4 py-8">
      <div className="grid grid-cols-1 lg:grid-cols-12 gap-6">
        {/* Main Content - 8 cols */}
        <main className="lg:col-span-8">
          {/* Hero Article */}
          <ArticleCard article={articles[0]} variant="hero" />

          {/* Articles Grid */}
          <div className="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
            {articles.slice(1).map(article => (
              <ArticleCard key={article.id} article={article} />
            ))}
          </div>
        </main>

        {/* Sidebar - 4 cols */}
        <aside className="lg:col-span-4">
          <AdSlot position="sidebar_top" size="300x600" />
        </aside>
      </div>
    </div>
  );
}
```

#### Article Page

```typescript
// app/[lang]/[category]/[slug]/page.tsx
import { getArticleBySlug } from '@/lib/api';
import { ArticleContent } from '@/components/article/ArticleContent';
import { Comments } from '@/components/article/Comments';

export default async function ArticlePage({
  params: { lang, slug }
}: {
  params: { lang: 'kz' | 'ru'; slug: string }
}) {
  const article = await getArticleBySlug(lang, slug);

  return (
    <article className="container mx-auto px-4 py-8">
      <header className="mb-8">
        <h1 className="text-4xl font-bold mb-4">
          {lang === 'kz' ? article.titleKz : article.titleRu}
        </h1>
      </header>

      <ArticleContent 
        content={lang === 'kz' ? article.contentKz : article.contentRu} 
      />

      {article.allowComments && (
        <Comments articleId={article.id} lang={lang} />
      )}
    </article>
  );
}
```

#### AI Editor

```typescript
// components/editor/AIEditor.tsx
'use client';

import { useState } from 'react';
import { useEditor, EditorContent } from '@tiptap/react';
import StarterKit from '@tiptap/starter-kit';
import { Button } from '@/components/ui/button';
import { useAI } from '@/hooks/useAI';

export function AIEditor() {
  const [keywords, setKeywords] = useState<string[]>([]);
  const [generating, setGenerating] = useState(false);
  const { generateArticle } = useAI();

  const editor = useEditor({
    extensions: [StarterKit],
    content: '',
  });

  const handleGenerate = async () => {
    setGenerating(true);
    try {
      const result = await generateArticle({
        keywords,
        tone: 'formal',
        length: 'medium',
        language: 'kz',
      });
      
      editor?.commands.setContent(result.article.content);
    } finally {
      setGenerating(false);
    }
  };

  return (
    <div className="grid grid-cols-12 gap-6">
      {/* Editor - 8 cols */}
      <div className="col-span-8">
        <EditorContent editor={editor} />
      </div>

      {/* AI Panel - 4 cols */}
      <aside className="col-span-4 bg-gray-50 p-6">
        <h3 className="font-semibold mb-4">AI Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ</h3>
        
        <div className="space-y-4">
          <input
            type="text"
            placeholder="ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°..."
            onChange={(e) => setKeywords(e.target.value.split(','))}
          />
          
          <Button 
            onClick={handleGenerate} 
            disabled={generating}
          >
            {generating ? 'Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ...' : 'Ğ¡Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ'}
          </Button>
        </div>
      </aside>
    </div>
  );
}
```

---

## 8. BACKEND ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ•

### 8.1 Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
apps/api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ modules/
â”‚   â”‚   â”œâ”€â”€ articles/
â”‚   â”‚   â”‚   â”œâ”€â”€ articles.controller.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ articles.service.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ articles.module.ts
â”‚   â”‚   â”‚   â””â”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ users/
â”‚   â”‚   â”œâ”€â”€ media/
â”‚   â”‚   â”œâ”€â”€ ai/
â”‚   â”‚   â”œâ”€â”€ categories/
â”‚   â”‚   â””â”€â”€ analytics/
â”‚   â”‚
â”‚   â”œâ”€â”€ common/
â”‚   â”‚   â”œâ”€â”€ guards/
â”‚   â”‚   â”œâ”€â”€ decorators/
â”‚   â”‚   â”œâ”€â”€ filters/
â”‚   â”‚   â””â”€â”€ pipes/
â”‚   â”‚
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”œâ”€â”€ database.config.ts
â”‚   â”‚   â”œâ”€â”€ redis.config.ts
â”‚   â”‚   â””â”€â”€ ai.config.ts
â”‚   â”‚
â”‚   â””â”€â”€ main.ts
â”‚
â”œâ”€â”€ prisma/
â”‚   â””â”€â”€ schema.prisma
â”‚
â”œâ”€â”€ .env
â”œâ”€â”€ nest-cli.json
â””â”€â”€ package.json
```

### 8.2 Key Services

#### Articles Service

```typescript
// modules/articles/articles.service.ts
import { Injectable } from '@nestjs/common';
import { PrismaService } from '@/prisma/prisma.service';
import { CreateArticleDto, UpdateArticleDto } from './dto';

@Injectable()
export class ArticlesService {
  constructor(private prisma: PrismaService) {}

  async findAll(query: {
    page?: number;
    limit?: number;
    category?: string;
    status?: ArticleStatus;
  }) {
    const { page = 1, limit = 20, category, status } = query;
    const skip = (page - 1) * limit;

    const where = {
      ...(category && { category: { slug: category } }),
      ...(status && { status }),
      deletedAt: null,
    };

    const [articles, total] = await Promise.all([
      this.prisma.article.findMany({
        where,
        skip,
        take: limit,
        include: {
          category: true,
          author: true,
          featuredImage: true,
        },
        orderBy: { publishedAt: 'desc' },
      }),
      this.prisma.article.count({ where }),
    ]);

    return {
      data: articles,
      meta: {
        total,
        page,
        limit,
        totalPages: Math.ceil(total / limit),
      },
    };
  }

  async findBySlug(language: 'kz' | 'ru', slug: string) {
    const article = await this.prisma.article.findUnique({
      where: language === 'kz' ? { slugKz: slug } : { slugRu: slug },
      include: {
        category: true,
        author: true,
        featuredImage: true,
        tags: { include: { tag: true } },
      },
    });

    if (!article) {
      throw new NotFoundException('Article not found');
    }

    // Increment views
    await this.prisma.article.update({
      where: { id: article.id },
      data: { views: { increment: 1 } },
    });

    return article;
  }

  async create(userId: string, dto: CreateArticleDto) {
    return this.prisma.article.create({
      data: {
        ...dto,
        authorId: userId,
        slugKz: this.generateSlug(dto.titleKz),
        slugRu: dto.titleRu ? this.generateSlug(dto.titleRu) : null,
      },
    });
  }

  async update(id: string, dto: UpdateArticleDto) {
    return this.prisma.article.update({
      where: { id },
      data: dto,
    });
  }

  async publish(id: string) {
    return this.prisma.article.update({
      where: { id },
      data: {
        status: 'published',
        publishedAt: new Date(),
      },
    });
  }

  private generateSlug(title: string): string {
    return title
      .toLowerCase()
      .replace(/[^\w\s-]/g, '')
      .replace(/\s+/g, '-')
      .substring(0, 255);
  }
}
```

#### AI Service

```typescript
// modules/ai/ai.service.ts
import { Injectable } from '@nestjs/common';
import { GoogleGenerativeAI } from '@google/generative-ai';
import OpenAI from 'openai';

@Injectable()
export class AIService {
  private gemini: GoogleGenerativeAI;
  private openai: OpenAI;

  constructor() {
    this.gemini = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
    this.openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });
  }

  async generateArticle(params: {
    keywords: string[];
    tone: string;
    length: string;
    language: 'kz' | 'ru';
  }) {
    const prompt = this.buildPrompt(params);
    
    try {
      const model = this.gemini.getGenerativeModel({ 
        model: 'gemini-pro' 
      });
      
      const result = await model.generateContent(prompt);
      const response = result.response.text();
      
      return this.parseResponse(response);
    } catch (error) {
      // Fallback to OpenAI
      const completion = await this.openai.chat.completions.create({
        model: 'gpt-4-turbo-preview',
        messages: [{ role: 'user', content: prompt }],
      });
      
      return this.parseResponse(completion.choices[0].message.content);
    }
  }

  async translate(text: string, fromLang: string, toLang: string) {
    const prompt = `Translate this ${fromLang} text to ${toLang}:\n\n${text}`;
    
    const model = this.gemini.getGenerativeModel({ model: 'gemini-pro' });
    const result = await model.generateContent(prompt);
    
    return {
      translation: result.response.text(),
      confidence: 0.95,
    };
  }

  private buildPrompt(params: any): string {
    const lengthMap = {
      short: '300-500',
      medium: '500-1000',
      long: '1000-2000',
    };

    return `
      Write a ${params.tone} news article in ${params.language === 'kz' ? 'Kazakh' : 'Russian'}.
      Keywords: ${params.keywords.join(', ')}
      Length: ${lengthMap[params.length]} words
      
      Return JSON: { "title": "...", "content": "..." }
    `;
  }

  private parseResponse(response: string) {
    try {
      return JSON.parse(response);
    } catch {
      return { title: '', content: response };
    }
  }
}
```

#### Auth Guard

```typescript
// common/guards/jwt-auth.guard.ts
import { Injectable, ExecutionContext } from '@nestjs/common';
import { AuthGuard } from '@nestjs/passport';

@Injectable()
export class JwtAuthGuard extends AuthGuard('jwt') {
  canActivate(context: ExecutionContext) {
    return super.canActivate(context);
  }
}

// Usage in controller
@Controller('articles')
export class ArticlesController {
  @Post()
  @UseGuards(JwtAuthGuard)
  create(@Body() dto: CreateArticleDto, @User() user) {
    return this.articlesService.create(user.id, dto);
  }
}
```

---

## 9. AI-Ğ¤Ğ£ĞĞšĞ¦Ğ˜ĞĞĞĞ›

### 9.1 AI Provider Configuration

```typescript
// config/ai.config.ts
export const aiConfig = {
  providers: {
    gemini: {
      enabled: true,
      apiKey: process.env.GEMINI_API_KEY,
      model: 'gemini-pro-1.5',
      maxTokens: 8000,
      temperature: 0.7,
      priority: 1,
    },
    openai: {
      enabled: true,
      apiKey: process.env.OPENAI_API_KEY,
      model: 'gpt-4-turbo-preview',
      maxTokens: 4000,
      temperature: 0.7,
      priority: 2,
    },
  },
  
  features: {
    autoTranslate: {
      enabled: true,
      trigger: 'onPublish',
      reviewRequired: true,
    },
    plagiarismCheck: {
      enabled: true,
      threshold: 0.8,
    },
  },
  
  limits: {
    daily: {
      generation: 1000,
      translation: 5000,
    },
    perUser: {
      generation: 50,
      translation: 200,
    },
  },
};
```

### 9.2 Generation Templates

```typescript
// ai/templates/article-templates.ts
export const articleTemplates = {
  breakingNews: {
    id: 'breaking-news',
    name: 'Ğ¡Ñ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ½Ğ¾Ğ²Ğ¾ÑÑ‚ÑŒ',
    structure: {
      headline: {
        type: 'text',
        maxLength: 80,
        required: true,
        aiHint: 'urgent, attention-grabbing',
      },
      lead: {
        type: 'text',
        maxLength: 200,
        required: true,
        aiHint: 'answer who, what, when, where, why',
      },
      body: {
        type: 'richtext',
        sections: [
          { name: 'details', aiHint: 'expand on the lead' },
          { name: 'background', aiHint: 'provide context' },
          { name: 'impact', aiHint: 'explain consequences' },
        ],
      },
    },
  },
  
  interview: {
    id: 'interview',
    name: 'Ğ˜Ğ½Ñ‚ĞµÑ€Ğ²ÑŒÑ',
    structure: {
      headline: {
        type: 'text',
        aiHint: 'include interviewee name',
      },
      introduction: {
        type: 'text',
        aiHint: 'introduce the person',
      },
      questions: {
        type: 'array',
        min: 5,
        max: 15,
        format: 'Q&A',
      },
    },
  },
};
```

### 9.3 Content Moderation

```typescript
// ai/moderation.service.ts
interface ContentModerationResult {
  safe: boolean;
  categories: {
    hate: number;
    violence: number;
    adult: number;
    spam: number;
  };
  flags: string[];
}

export class AIContentModerator {
  async moderate(content: string): Promise<ContentModerationResult> {
    const model = this.gemini.getGenerativeModel({ model: 'gemini-pro' });
    
    const prompt = `
      Analyze this content for safety issues:
      ${content}
      
      Return JSON with safety ratings (0-1) for:
      - hate speech
      - violence
      - adult content
      - spam
    `;
    
    const result = await model.generateContent(prompt);
    const response = JSON.parse(result.response.text());
    
    return {
      safe: Object.values(response).every(v => v < 0.5),
      categories: response,
      flags: this.extractFlags(response),
    };
  }
}
```

---

## 10. Ğ Ğ•ĞšĞ›ĞĞœĞĞĞ¯ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ

### 10.1 Ad Unit Types

```typescript
// Ad sizes
enum AdSize {
  // Desktop
  LEADERBOARD = '728x90',
  LARGE_LEADERBOARD = '970x90',
  RECTANGLE = '300x250',
  HALF_PAGE = '300x600',
  
  // Mobile
  MOBILE_BANNER = '320x50',
  MOBILE_RECTANGLE = '300x250',
  
  // Special
  NATIVE = 'native',
  FULLSCREEN = 'fullscreen',
}

// Ad positions
enum AdPosition {
  HEADER = 'header',
  SIDEBAR_TOP = 'sidebar_top',
  SIDEBAR_MIDDLE = 'sidebar_middle',
  IN_CONTENT = 'in_content',
  STICKY_BOTTOM = 'sticky_bottom',
  FOOTER = 'footer',
}
```

### 10.2 Ad Serving

```typescript
// components/ads/AdSlot.tsx
'use client';

import { useEffect, useState } from 'react';
import { useInView } from 'react-intersection-observer';

interface AdSlotProps {
  position: AdPosition;
  size: AdSize;
}

export function AdSlot({ position, size }: AdSlotProps) {
  const [ad, setAd] = useState<AdUnit | null>(null);
  const { ref, inView } = useInView({ threshold: 0.5 });

  useEffect(() => {
    // Fetch ad
    fetch('/api/ads/serve', {
      method: 'POST',
      body: JSON.stringify({ position, size }),
    })
      .then(res => res.json())
      .then(data => setAd(data.ad));
  }, [position, size]);

  useEffect(() => {
    // Track impression when visible
    if (inView && ad) {
      fetch('/api/ads/impressions', {
        method: 'POST',
        body: JSON.stringify({
          adUnitId: ad.id,
          viewable: true,
        }),
      });
    }
  }, [inView, ad]);

  if (!ad) return null;

  return (
    <div ref={ref} className="ad-slot">
      <div dangerouslySetInnerHTML={{ __html: ad.htmlContent }} />
    </div>
  );
}
```

### 10.3 Ad Management API

```typescript
// modules/ads/ads.service.ts
@Injectable()
export class AdsService {
  async serveAd(params: {
    position: AdPosition;
    size: AdSize;
    device: DeviceType;
  }) {
    // Find matching ad unit
    const ad = await this.prisma.adUnit.findFirst({
      where: {
        position: params.position,
        size: params.size,
        isActive: true,
      },
      orderBy: { priority: 'desc' },
    });

    if (!ad) return null;

    return {
      ad,
      impressionTrackingUrl: `/api/ads/impressions`,
    };
  }

  async trackImpression(adUnitId: string, data: any) {
    await this.prisma.adImpression.create({
      data: {
        adUnitId,
        ...data,
      },
    });

    // Update counter
    await this.prisma.adUnit.update({
      where: { id: adUnitId },
      data: { totalImpressions: { increment: 1 } },
    });
  }
}
```

---

## 11. ĞœĞĞ‘Ğ˜Ğ›Ğ¬ĞĞĞ¯ ĞĞ”ĞĞŸĞ¢ĞĞ¦Ğ˜Ğ¯

### 11.1 Progressive Web App

```json
// public/manifest.json
{
  "name": "ĞĞ¹Ğ¼Ğ°Ò› Ğ°Ò›ÑˆĞ°Ğ¼Ñ‹",
  "short_name": "ĞĞ¹Ğ¼Ğ°Ò›",
  "description": "ÒšĞ°Ğ»Ğ°Ğ»Ñ‹Ò› Ğ³Ğ°Ğ·ĞµÑ‚",
  "lang": "kk-KZ",
  "start_url": "/",
  "display": "standalone",
  "orientation": "portrait",
  "theme_color": "#1E40AF",
  "background_color": "#FFFFFF",
  "icons": [
    {
      "src": "/icons/icon-192.png",
      "sizes": "192x192",
      "type": "image/png",
      "purpose": "maskable"
    },
    {
      "src": "/icons/icon-512.png",
      "sizes": "512x512",
      "type": "image/png"
    }
  ]
}
```

### 11.2 Service Worker

```typescript
// sw.ts
import { precacheAndRoute } from 'workbox-precaching';
import { registerRoute } from 'workbox-routing';
import { CacheFirst, NetworkFirst } from 'workbox-strategies';

// Precache static assets
precacheAndRoute(self.__WB_MANIFEST);

// Cache images
registerRoute(
  ({ request }) => request.destination === 'image',
  new CacheFirst({
    cacheName: 'images',
    plugins: [
      {
        maxEntries: 100,
        maxAgeSeconds: 30 * 24 * 60 * 60, // 30 days
      },
    ],
  })
);

// Cache API responses
registerRoute(
  ({ url }) => url.pathname.startsWith('/api/articles'),
  new NetworkFirst({
    cacheName: 'api-articles',
    plugins: [
      {
        maxAgeSeconds: 5 * 60, // 5 minutes
      },
    ],
  })
);
```

### 11.3 Mobile Navigation

```typescript
// components/layout/MobileNav.tsx
'use client';

export function MobileNav() {
  return (
    <>
      {/* Fixed Header */}
      <header className="fixed top-0 z-50 w-full h-14 bg-white border-b">
        <div className="flex items-center justify-between px-4 h-full">
          <button aria-label="Menu">
            <MenuIcon size={24} />
          </button>
          <Logo className="h-8" />
          <button aria-label="Search">
            <SearchIcon size={24} />
          </button>
        </div>
      </header>

      {/* Bottom Tab Bar */}
      <nav className="fixed bottom-0 z-50 w-full h-16 bg-white border-t">
        <div className="grid grid-cols-5 h-full">
          <NavItem icon={HomeIcon} label="Ğ‘Ğ°ÑÑ‚Ñ‹" href="/" />
          <NavItem icon={NewsIcon} label="Ğ–Ğ°Ò£Ğ°Ğ»Ñ‹Ò›Ñ‚Ğ°Ñ€" href="/zhanalyqtar" />
          <NavItem icon={VideoIcon} label="Ğ’Ğ¸Ğ´ĞµĞ¾" href="/multimedia/video" />
          <NavItem icon={SearchIcon} label="Ğ†Ğ·Ğ´ĞµÑƒ" />
          <NavItem icon={MenuIcon} label="ĞœÓ™Ğ·Ñ–Ñ€" />
        </div>
      </nav>

      {/* Content with padding for fixed elements */}
      <main className="pt-14 pb-16">
        {/* Page content */}
      </main>
    </>
  );
}
```

### 11.4 Touch Optimization

```typescript
// Touch-friendly button
const TouchButton = styled.button`
  min-height: 44px;
  min-width: 44px;
  padding: 12px;
  touch-action: manipulation;
`;

// Swipe gestures
import { useSwipeable } from 'react-swipeable';

function ArticleGallery({ images }) {
  const handlers = useSwipeable({
    onSwipedLeft: () => nextImage(),
    onSwipedRight: () => prevImage(),
    preventDefaultTouchmoveEvent: true,
  });

  return <div {...handlers}>{/* Gallery */}</div>;
}
```

---

## 12. Ğ‘Ğ•Ğ—ĞĞŸĞĞ¡ĞĞĞ¡Ğ¢Ğ¬

### 12.1 Security Headers

```typescript
// next.config.js
const securityHeaders = [
  {
    key: 'Strict-Transport-Security',
    value: 'max-age=63072000; includeSubDomains; preload'
  },
  {
    key: 'X-Frame-Options',
    value: 'SAMEORIGIN'
  },
  {
    key: 'X-Content-Type-Options',
    value: 'nosniff'
  },
  {
    key: 'Content-Security-Policy',
    value: `
      default-src 'self';
      script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com;
      style-src 'self' 'unsafe-inline';
      img-src 'self' data: https:;
      font-src 'self' data:;
      connect-src 'self' https://api.aimak.kz;
    `.replace(/\s{2,}/g, ' ').trim()
  }
];
```

### 12.2 Authentication

```typescript
// JWT Strategy
import { Strategy, ExtractJwt } from 'passport-jwt';

@Injectable()
export class JwtStrategy extends Strategy {
  constructor() {
    super({
      jwtFromRequest: ExtractJwt.fromAuthHeaderAsBearerToken(),
      secretOrKey: process.env.JWT_SECRET,
    });
  }

  async validate(payload: JWTPayload) {
    return {
      id: payload.sub,
      email: payload.email,
      role: payload.role,
    };
  }
}
```

### 12.3 Rate Limiting

```typescript
// Rate limiter
import { RateLimiterRedis } from 'rate-limiter-flexible';

const rateLimiter = new RateLimiterRedis({
  storeClient: redisClient,
  points: 100, // requests
  duration: 60, // per 60 seconds
  blockDuration: 60,
});

async function rateLimitMiddleware(req, res, next) {
  try {
    await rateLimiter.consume(req.ip);
    next();
  } catch (error) {
    res.status(429).json({
      error: 'Too many requests',
      retryAfter: error.msBeforeNext / 1000
    });
  }
}
```

### 12.4 Input Validation

```typescript
// Zod validation schemas
import { z } from 'zod';

export const CreateArticleSchema = z.object({
  titleKz: z.string().min(10).max(500),
  contentKz: z.string().min(100).max(50000),
  categoryId: z.string().uuid(),
  tags: z.array(z.string().uuid()).max(10),
  status: z.enum(['draft', 'review', 'scheduled', 'published']),
});

// HTML Sanitization
import DOMPurify from 'isomorphic-dompurify';

function sanitizeHTML(dirty: string): string {
  return DOMPurify.sanitize(dirty, {
    ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'a', 'ul', 'ol', 'li', 'h2', 'h3'],
    ALLOWED_ATTR: ['href', 'target', 'rel'],
  });
}
```

---

## 13. ĞŸĞ ĞĞ˜Ğ—Ğ’ĞĞ”Ğ˜Ğ¢Ğ•Ğ›Ğ¬ĞĞĞ¡Ğ¢Ğ¬

### 13.1 Performance Targets

| ĞœĞµÑ‚Ñ€Ğ¸ĞºĞ° | Target | Critical |
|---------|--------|----------|
| Lighthouse Performance | > 90 | > 75 |
| First Contentful Paint | < 1.8s | < 3s |
| Largest Contentful Paint | < 2.5s | < 4s |
| Time to Interactive | < 3.5s | < 5s |
| First Input Delay | < 100ms | < 300ms |
| Cumulative Layout Shift | < 0.1 | < 0.25 |
| Time to First Byte | < 200ms | < 600ms |

### 13.2 Image Optimization

```typescript
// Next.js Image component
import Image from 'next/image';

export function OptimizedImage({ src, alt }) {
  return (
    <Image
      src={src}
      alt={alt}
      width={800}
      height={600}
      sizes="(max-width: 768px) 100vw, 800px"
      quality={85}
      loading="lazy"
      placeholder="blur"
    />
  );
}
```

### 13.3 Code Splitting

```typescript
// Dynamic imports
import dynamic from 'next/dynamic';

const AIEditor = dynamic(() => import('@/components/editor/AIEditor'), {
  loading: () => <Skeleton />,
  ssr: false
});

const AdminPanel = dynamic(() => import('@/app/admin'), {
  loading: () => <Loading />,
  ssr: false
});
```

### 13.4 Caching Strategy

```typescript
// Redis caching
class CacheService {
  async get<T>(key: string): Promise<T | null> {
    const cached = await redis.get(key);
    return cached ? JSON.parse(cached) : null;
  }

  async set(key: string, value: any, ttl: number = 3600) {
    await redis.setex(key, ttl, JSON.stringify(value));
  }
}

// Usage
async getArticles() {
  const cacheKey = 'articles:latest:20';
  
  let articles = await this.cache.get(cacheKey);
  
  if (!articles) {
    articles = await this.prisma.article.findMany({ take: 20 });
    await this.cache.set(cacheKey, articles, 300); // 5 min
  }
  
  return articles;
}
```

---

## 14. SEO ĞĞŸĞ¢Ğ˜ĞœĞ˜Ğ—ĞĞ¦Ğ˜Ğ¯

### 14.1 Meta Tags

```typescript
// app/[lang]/[category]/[slug]/page.tsx
export async function generateMetadata({ params }) {
  const article = await getArticleBySlug(params.lang, params.slug);

  return {
    title: article.titleKz,
    description: article.excerptKz,
    openGraph: {
      title: article.titleKz,
      description: article.excerptKz,
      images: [article.featuredImage?.url],
      type: 'article',
      publishedTime: article.publishedAt,
      authors: [article.author.name],
    },
    twitter: {
      card: 'summary_large_image',
      title: article.titleKz,
      description: article.excerptKz,
      images: [article.featuredImage?.url],
    },
  };
}
```

### 14.2 Structured Data

```typescript
// Schema.org JSON-LD
export function ArticleStructuredData({ article }) {
  const structuredData = {
    '@context': 'https://schema.org',
    '@type': 'NewsArticle',
    headline: article.titleKz,
    description: article.excerptKz,
    image: article.featuredImage?.url,
    datePublished: article.publishedAt,
    dateModified: article.updatedAt,
    author: {
      '@type': 'Person',
      name: article.author.name,
    },
    publisher: {
      '@type': 'Organization',
      name: 'ĞĞ¹Ğ¼Ğ°Ò› Ğ°Ò›ÑˆĞ°Ğ¼Ñ‹',
      logo: {
        '@type': 'ImageObject',
        url: 'https://aimak.kz/logo.png',
      },
    },
  };

  return (
    <script
      type="application/ld+json"
      dangerouslySetInnerHTML={{ __html: JSON.stringify(structuredData) }}
    />
  );
}
```

### 14.3 Sitemap

```typescript
// app/sitemap.ts
export default async function sitemap() {
  const articles = await getArticles({ limit: 10000 });

  const articleUrls = articles.map(article => ({
    url: `https://aimak.kz/kz/${article.category.slug}/${article.slugKz}`,
    lastModified: article.updatedAt,
    changeFrequency: 'daily',
    priority: article.isFeatured ? 1.0 : 0.8,
  }));

  return [
    {
      url: 'https://aimak.kz',
      lastModified: new Date(),
      changeFrequency: 'hourly',
      priority: 1,
    },
    ...articleUrls,
  ];
}
```

### 14.4 Robots.txt

```
# public/robots.txt
User-agent: *
Allow: /
Disallow: /admin/
Disallow: /api/

Sitemap: https://aimak.kz/sitemap.xml
```

---

## 15. ĞĞĞĞ›Ğ˜Ğ¢Ğ˜ĞšĞ

### 15.1 Events Tracking

```typescript
// Analytics Events
enum AnalyticsEvent {
  PAGE_VIEW = 'page_view',
  ARTICLE_VIEW = 'article_view',
  ARTICLE_READ = 'article_read',
  SEARCH_QUERY = 'search_query',
  AI_GENERATE = 'ai_generate',
  AD_IMPRESSION = 'ad_impression',
  AD_CLICK = 'ad_click',
}

// Analytics Service
class AnalyticsService {
  async track(event: AnalyticsEvent, properties: any) {
    // Send to GA4
    gtag('event', event, properties);
    
    // Send to Yandex Metrika
    ym(COUNTER_ID, 'reachGoal', event, properties);
    
    // Send to custom backend
    await fetch('/api/analytics/track', {
      method: 'POST',
      body: JSON.stringify({ event, properties }),
    });
  }
}

// React Hook
function useAnalytics() {
  const trackEvent = useCallback((event, properties) => {
    analytics.track(event, {
      ...properties,
      sessionId: getSessionId(),
      timestamp: new Date(),
    });
  }, []);
  
  return { trackEvent };
}
```

### 15.2 Dashboard

```typescript
// Analytics Dashboard
async function getAnalyticsDashboard(from: Date, to: Date) {
  const [totalViews, topArticles, viewsByDay] = await Promise.all([
    // Total views
    prisma.analyticsEvent.count({
      where: {
        eventType: 'article_view',
        createdAt: { gte: from, lte: to },
      },
    }),
    
    // Top articles
    prisma.article.findMany({
      orderBy: { views: 'desc' },
      take: 10,
      include: { category: true },
    }),
    
    // Views by day
    prisma.$queryRaw`
      SELECT DATE(created_at) as date, COUNT(*) as views
      FROM analytics_events
      WHERE event_type = 'article_view'
      AND created_at BETWEEN ${from} AND ${to}
      GROUP BY DATE(created_at)
      ORDER BY date
    `,
  ]);

  return { totalViews, topArticles, viewsByDay };
}
```

---

## 16. DEPLOYMENT

### 16.1 Docker Configuration

```dockerfile
# Dockerfile (Multi-stage)
FROM node:20-alpine AS base
WORKDIR /app

# Dependencies
FROM base AS deps
COPY package.json pnpm-lock.yaml ./
RUN corepack enable pnpm && pnpm install --frozen-lockfile

# Builder
FROM base AS builder
COPY --from=deps /app/node_modules ./node_modules
COPY . .
RUN pnpm build

# Production
FROM base AS runner
ENV NODE_ENV=production

COPY --from=builder /app/public ./public
COPY --from=builder /app/.next/standalone ./
COPY --from=builder /app/.next/static ./.next/static

EXPOSE 3000
CMD ["node", "server.js"]
```

### 16.2 Docker Compose

```yaml
# docker-compose.yml
version: '3.8'

services:
  web:
    build:
      context: ./apps/web
      dockerfile: Dockerfile
    ports:
      - "3000:3000"
    environment:
      - DATABASE_URL=postgresql://aimak:password@postgres:5432/aimak
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis

  api:
    build:
      context: ./apps/api
      dockerfile: Dockerfile
    ports:
      - "4000:4000"
    environment:
      - DATABASE_URL=postgresql://aimak:password@postgres:5432/aimak
      - REDIS_URL=redis://redis:6379
      - GEMINI_API_KEY=${GEMINI_API_KEY}
    depends_on:
      - postgres
      - redis

  postgres:
    image: postgres:15-alpine
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_DB=aimak
      - POSTGRES_USER=aimak
      - POSTGRES_PASSWORD=password
    volumes:
      - postgres_data:/var/lib/postgresql/data

  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data

  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf:ro
      - ./nginx/ssl:/etc/nginx/ssl:ro
    depends_on:
      - web
      - api

volumes:
  postgres_data:
  redis_data:
```

### 16.3 Nginx Configuration

```nginx
# nginx/nginx.conf
http {
  upstream web_backend {
    server web:3000;
  }

  upstream api_backend {
    server api:4000;
  }

  # HTTP -> HTTPS redirect
  server {
    listen 80;
    server_name aimak.kz;
    return 301 https://$server_name$request_uri;
  }

  # HTTPS
  server {
    listen 443 ssl http2;
    server_name aimak.kz;

    ssl_certificate /etc/nginx/ssl/fullchain.pem;
    ssl_certificate_key /etc/nginx/ssl/privkey.pem;

    # Frontend
    location / {
      proxy_pass http://web_backend;
      proxy_http_version 1.1;
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection 'upgrade';
      proxy_set_header Host $host;
    }

    # API
    location /api/ {
      proxy_pass http://api_backend;
      proxy_set_header Host $host;
    }
  }
}
```

### 16.4 CI/CD Pipeline

```yaml
# .github/workflows/deploy.yml
name: Deploy

on:
  push:
    branches: [main]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - uses: actions/checkout@v3
      
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: '20'
      
      - name: Install pnpm
        run: corepack enable pnpm
      
      - name: Install dependencies
        run: pnpm install
      
      - name: Lint
        run: pnpm lint
      
      - name: Type check
        run: pnpm type-check
      
      - name: Test
        run: pnpm test
      
      - name: Build
        run: pnpm build
      
      - name: Build Docker image
        run: docker build -t aimak-web .
      
      - name: Push to registry
        run: |
          echo ${{ secrets.REGISTRY_PASSWORD }} | docker login -u ${{ secrets.REGISTRY_USERNAME }} --password-stdin
          docker push aimak-web:latest
      
      - name: Deploy to VPS
        uses: appleboy/ssh-action@master
        with:
          host: ${{ secrets.VPS_HOST }}
          username: ${{ secrets.VPS_USER }}
          key: ${{ secrets.VPS_SSH_KEY }}
          script: |
            cd /var/www/aimak
            docker-compose pull
            docker-compose up -d
```

---

## 17. ĞœĞĞĞ˜Ğ¢ĞĞ Ğ˜ĞĞ“

### 17.1 Prometheus Configuration

```yaml
# prometheus/prometheus.yml
global:
  scrape_interval: 15s

scrape_configs:
  - job_name: 'web'
    static_configs:
      - targets: ['web:3000']
  
  - job_name: 'api'
    static_configs:
      - targets: ['api:4000']
  
  - job_name: 'postgres'
    static_configs:
      - targets: ['postgres-exporter:9187']
```

### 17.2 Grafana Dashboards

```json
{
  "dashboard": {
    "title": "Aimak Akshamy Metrics",
    "panels": [
      {
        "title": "Request Rate",
        "targets": [
          {
            "expr": "rate(http_requests_total[5m])"
          }
        ]
      },
      {
        "title": "Response Time",
        "targets": [
          {
            "expr": "histogram_quantile(0.95, http_request_duration_seconds_bucket)"
          }
        ]
      },
      {
        "title": "Error Rate",
        "targets": [
          {
            "expr": "rate(http_requests_total{status=~\"5..\"}[5m])"
          }
        ]
      }
    ]
  }
}
```

### 17.3 Health Checks

```typescript
// Health check endpoint
@Controller('health')
export class HealthController {
  @Get()
  async check() {
    const checks = await Promise.all([
      this.checkDatabase(),
      this.checkRedis(),
      this.checkS3(),
    ]);

    const healthy = checks.every(c => c.healthy);

    return {
      status: healthy ? 'ok' : 'error',
      timestamp: new Date(),
      checks,
    };
  }

  private async checkDatabase() {
    try {
      await this.prisma.$queryRaw`SELECT 1`;
      return { name: 'database', healthy: true };
    } catch (error) {
      return { name: 'database', healthy: false, error };
    }
  }
}
```

---

## 18. Ğ¢Ğ•Ğ¡Ğ¢Ğ˜Ğ ĞĞ’ĞĞĞ˜Ğ•

### 18.1 Unit Tests

```typescript
// articles.service.spec.ts
describe('ArticlesService', () => {
  let service: ArticlesService;
  let prisma: PrismaService;

  beforeEach(async () => {
    const module = await Test.createTestingModule({
      providers: [ArticlesService, PrismaService],
    }).compile();

    service = module.get(ArticlesService);
    prisma = module.get(PrismaService);
  });

  it('should create article', async () => {
    const dto = {
      titleKz: 'Ğ¢ĞµÑÑ‚ Ğ¼Ğ°Ò›Ğ°Ğ»Ğ°',
      contentKz: 'ĞœĞ°Ğ·Ğ¼Ò±Ğ½Ñ‹...',
      categoryId: 'uuid',
    };

    jest.spyOn(prisma.article, 'create').mockResolvedValue({
      id: 'uuid',
      ...dto,
    } as any);

    const result = await service.create('user-id', dto);
    expect(result.titleKz).toBe(dto.titleKz);
  });
});
```

### 18.2 E2E Tests

```typescript
// articles.e2e.spec.ts
import { test, expect } from '@playwright/test';

test.describe('Articles', () => {
  test('should display articles on homepage', async ({ page }) => {
    await page.goto('/');
    
    const articles = page.locator('[data-testid="article-card"]');
    await expect(articles).toHaveCount({ min: 1 });
  });

  test('should open article page', async ({ page }) => {
    await page.goto('/');
    await page.click('[data-testid="article-card"]:first-child');
    
    await expect(page.locator('h1')).toBeVisible();
    await expect(page.locator('[data-testid="article-content"]')).toBeVisible();
  });

  test('should switch language', async ({ page }) => {
    await page.goto('/kz');
    await page.click('[data-testid="lang-switcher"]');
    await page.click('[data-testid="lang-ru"]');
    
    await expect(page).toHaveURL(/\/ru/);
  });
});
```

### 18.3 Performance Tests

```javascript
// load-test.js (K6)
import http from 'k6/http';
import { check, sleep } from 'k6';

export const options = {
  stages: [
    { duration: '30s', target: 50 },
    { duration: '1m', target: 100 },
    { duration: '30s', target: 0 },
  ],
  thresholds: {
    http_req_duration: ['p(95)<500'],
    http_req_failed: ['rate<0.01'],
  },
};

export default function () {
  const res = http.get('https://aimak.kz');
  
  check(res, {
    'status is 200': (r) => r.status === 200,
    'loads < 2s': (r) => r.timings.duration < 2000,
  });
  
  sleep(1);
}
```

---

## 19. ROADMAP

### Phase 1: MVP (10 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

#### Weeks 1-2: Design & Setup
- [ ] Figma Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ Ğ²ÑĞµÑ… ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†
- [ ] Design System
- [ ] Frontend setup (Next.js)
- [ ] Backend setup (NestJS)
- [ ] Database schema
- [ ] DevOps setup (Docker)

#### Weeks 3-4: Core Features
- [ ] Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ°
- [ ] Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹
- [ ] Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ÑÑ‚Ğ°Ñ‚ÑŒĞ¸
- [ ] ĞĞ°Ğ²Ğ¸Ğ³Ğ°Ñ†Ğ¸Ñ
- [ ] Mobile Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ

#### Weeks 5-6: Admin Panel
- [ ] ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- [ ] Dashboard
- [ ] CRUD ÑÑ‚Ğ°Ñ‚ĞµĞ¹
- [ ] ĞœĞµĞ´Ğ¸Ğ°Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ°
- [ ] ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ¸ Ñ‚ĞµĞ³Ğ¸

#### Weeks 7-8: AI Integration
- [ ] Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Gemini API
- [ ] Ğ‘Ğ°Ğ·Ğ¾Ğ²Ğ°Ñ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ KZâ†”RU
- [ ] AI-Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¾Ñ€

#### Weeks 9-10: Launch Prep
- [ ] SEO Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- [ ] Performance tuning
- [ ] Security audit
- [ ] Testing
- [ ] Beta launch

### Phase 2: Enhancement (8 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

#### Weeks 11-12: Ads & Monetization
- [ ] Ğ ĞµĞºĞ»Ğ°Ğ¼Ğ½Ğ°Ñ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
- [ ] Google AdSense
- [ ] Ğ¯Ğ½Ğ´ĞµĞºÑ.Ğ”Ğ¸Ñ€ĞµĞºÑ‚
- [ ] A/B Ñ‚ĞµÑÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

#### Weeks 13-14: Advanced Features
- [ ] PDF Ğ°Ñ€Ñ…Ğ¸Ğ²
- [ ] ĞŸĞ¾Ğ»Ğ½Ğ¾Ñ‚ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ğ¾Ğ¸ÑĞº
- [ ] ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸
- [ ] Push-ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ñ

#### Weeks 15-16: Analytics
- [ ] Ğ Ğ°ÑÑˆĞ¸Ñ€ĞµĞ½Ğ½Ğ°Ñ Ğ°Ğ½Ğ°Ğ»Ğ¸Ñ‚Ğ¸ĞºĞ°
- [ ] AI Analytics Dashboard
- [ ] Performance optimization

#### Weeks 17-18: Mobile App
- [ ] PWA Ñ„Ğ¸Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- [ ] App Store/Google Play

### Phase 3: Scale (6 Ğ½ĞµĞ´ĞµĞ»ÑŒ)

#### Weeks 19-20: Advanced AI
- [ ] AI-ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ñ‹
- [ ] Ğ¤Ğ°ĞºÑ‚-Ñ‡ĞµĞºĞ¸Ğ½Ğ³
- [ ] ĞŸĞ»Ğ°Ğ³Ğ¸Ğ°Ñ‚-Ğ´ĞµÑ‚ĞµĞºÑ‚Ğ¾Ñ€

#### Weeks 21-22: Engagement
- [ ] ĞŸĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
- [ ] Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸
- [ ] Newsletter system

#### Weeks 23-24: Enterprise
- [ ] Advanced permissions
- [ ] API Ğ´Ğ»Ñ Ğ¿Ğ°Ñ€Ñ‚Ğ½ĞµÑ€Ğ¾Ğ²

---

## 20. ACCEPTANCE CRITERIA

### 20.1 Functional Requirements

**ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ Ñ‡Ğ°ÑÑ‚ÑŒ:**
- [ ] Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ < 2s
- [ ] ĞšĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ğ¾Ğµ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ²ÑĞµÑ… ÑƒÑÑ‚Ñ€Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°Ñ…
- [ ] ĞŸĞµÑ€ĞµĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ ÑĞ·Ñ‹ĞºĞ¾Ğ² KZ/RU Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Ğ’ÑĞµ Ñ€ÑƒĞ±Ñ€Ğ¸ĞºĞ¸ Ğ¾Ñ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°ÑÑ‚ÑÑ
- [ ] ĞŸĞ¾Ğ¸ÑĞº Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Ğ¡Ñ‚Ğ°Ñ‚ÑŒĞ¸ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ
- [ ] ĞšĞ¾Ğ¼Ğ¼ĞµĞ½Ñ‚Ğ°Ñ€Ğ¸Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ÑÑ‚
- [ ] Sharing Ğ² ÑĞ¾Ñ†ÑĞµÑ‚Ğ¸ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

**ĞĞ´Ğ¼Ğ¸Ğ½-Ğ¿Ğ°Ğ½ĞµĞ»ÑŒ:**
- [ ] ĞĞ²Ñ‚Ğ¾Ñ€Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] CRUD ÑÑ‚Ğ°Ñ‚ĞµĞ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] AI-Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] ĞĞ²Ñ‚Ğ¾Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¼ĞµĞ´Ğ¸Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚
- [ ] ĞŸĞ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ñ‰Ğ¸Ğº Ğ¿ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ†Ğ¸Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

### 20.2 Non-Functional Requirements

**Performance:**
- [ ] Lighthouse Performance > 90
- [ ] TTFB < 200ms
- [ ] LCP < 2.5s
- [ ] CLS < 0.1

**Security:**
- [ ] HTTPS everywhere
- [ ] Security headers Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹
- [ ] XSS Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
- [ ] CSRF Ğ·Ğ°Ñ‰Ğ¸Ñ‚Ğ°
- [ ] Rate limiting Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚

**Accessibility:**
- [ ] Lighthouse Accessibility > 90
- [ ] Keyboard navigation
- [ ] Screen reader support
- [ ] ARIA attributes

**SEO:**
- [ ] Lighthouse SEO > 95
- [ ] Meta tags ĞºĞ¾Ñ€Ñ€ĞµĞºÑ‚Ğ½Ñ‹
- [ ] Sitemap Ğ³ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµÑ‚ÑÑ
- [ ] Schema.org Ñ€Ğ°Ğ·Ğ¼ĞµÑ‚ĞºĞ°

---

## ğŸ“š ĞŸĞ Ğ˜Ğ›ĞĞ–Ğ•ĞĞ˜Ğ¯

### A. Environment Variables

```bash
# .env.example

# Database
DATABASE_URL="postgresql://user:password@localhost:5432/aimak"

# Redis
REDIS_URL="redis://localhost:6379"

# JWT
JWT_SECRET="your-secret-key"
JWT_EXPIRES_IN="15m"
JWT_REFRESH_SECRET="your-refresh-secret"
JWT_REFRESH_EXPIRES_IN="7d"

# AI Providers
GEMINI_API_KEY="your-gemini-key"
OPENAI_API_KEY="your-openai-key"

# Storage
S3_ENDPOINT="http://localhost:9000"
S3_ACCESS_KEY="minioadmin"
S3_SECRET_KEY="minioadmin"
S3_BUCKET="aimak-media"

# Analytics
GA_MEASUREMENT_ID="G-XXXXXXXXXX"
YANDEX_METRIKA_ID="XXXXXXXX"

# External Services
KASPI_API_KEY="your-kaspi-key"
EGOV_CLIENT_ID="your-egov-client-id"
```

### B. Development Commands

```bash
# Install dependencies
pnpm install

# Development
pnpm dev              # Start dev server
pnpm dev:api          # Start API dev server

# Build
pnpm build            # Build for production
pnpm build:api        # Build API

# Database
pnpm db:migrate       # Run migrations
pnpm db:seed          # Seed database
pnpm db:studio        # Open Prisma Studio

# Testing
pnpm test             # Run unit tests
pnpm test:e2e         # Run E2E tests
pnpm test:coverage    # Generate coverage

# Linting
pnpm lint             # Lint code
pnpm lint:fix         # Fix linting issues
pnpm type-check       # Check TypeScript types

# Docker
docker-compose up -d              # Start all services
docker-compose down               # Stop all services
docker-compose logs -f web        # View web logs
```

### C. Useful Links

- [Next.js Documentation](https://nextjs.org/docs)
- [NestJS Documentation](https://docs.nestjs.com)
- [Prisma Documentation](https://www.prisma.io/docs)
- [TailwindCSS Documentation](https://tailwindcss.com/docs)
- [Google Gemini API](https://ai.google.dev/docs)
- [OpenAI API](https://platform.openai.com/docs)

---



---

**Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ**

*Ğ’ĞµÑ€ÑĞ¸Ñ: 3.0.0 Final*  
*Ğ”Ğ°Ñ‚Ğ°: 2024*  
*Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ: âœ… Ready for Development*  
*ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ°: 26 ÑĞ¿ĞµÑ†Ğ¸Ğ°Ğ»Ğ¸ÑÑ‚Ğ¾Ğ²*

---

## âœ… CHECKLIST Ğ”Ğ›Ğ¯ Ğ¡Ğ¢ĞĞ Ğ¢Ğ Ğ ĞĞ—Ğ ĞĞ‘ĞĞ¢ĞšĞ˜

- [ ] Ğ ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ¹ ÑĞ¾Ğ·Ğ´Ğ°Ğ½
- [ ] ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ° ÑĞ¾Ğ±Ñ€Ğ°Ğ½Ğ°
- [ ] Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ñ‹ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹
- [ ] Ğ›Ğ¾ĞºĞ°Ğ»ÑŒĞ½Ğ¾Ğµ Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ´Ğ½ÑÑ‚Ğ¾
- [ ] Database schema Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ°
- [ ] AI API ĞºĞ»ÑÑ‡Ğ¸ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ñ‹
- [ ] ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ ÑĞ¿Ñ€Ğ¸Ğ½Ñ‚ ÑĞ¿Ğ»Ğ°Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½
- [ ] Figma Ğ´Ğ¸Ğ·Ğ°Ğ¹Ğ½ ÑÑ‚Ğ°Ñ€Ñ‚Ğ¾Ğ²Ğ°Ğ»
- [ ] CI/CD pipeline Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½
- [ ] ĞœĞ¾Ğ½Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ğ½Ğ³ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½

**ĞŸÑ€Ğ¾ĞµĞºÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ² Ğº Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ! ğŸš€**
```
